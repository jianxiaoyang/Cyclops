<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html>
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Convert data from two data frames or ffdf objects into a CyclopsData object — convertToCyclopsData • Cyclops</title>

<!-- jquery -->
<script src="https://code.jquery.com/jquery-3.1.0.min.js" integrity="sha384-nrOSfDHtoPMzJHjVTdCopGqIqeYETSXhZDFyniQ8ZHcVy08QesyHcnOUpMpqnmWq" crossorigin="anonymous"></script>
<!-- Bootstrap -->
<link href="https://maxcdn.bootstrapcdn.com/bootswatch/3.3.7/cosmo/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">

<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>

<!-- Font Awesome icons -->
<link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-T8Gy5hrqNKT+hzMclPo118YTQO6cYprQmhrYwIiQ/3axmI1hQomh7Ud2hPOy8SP1" crossorigin="anonymous">

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/1.7.1/clipboard.min.js" integrity="sha384-cV+rhyOuRHc9Ub/91rihWcGmMmCXDeksTtCihMupQHSsi8GIIRDG0ThDc3HGQFJ3" crossorigin="anonymous"></script>

<!-- sticky kit -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/sticky-kit/1.1.3/sticky-kit.min.js" integrity="sha256-c4Rlo1ZozqTPE2RLuvbusY3+SU1pQaJC0TjuhygMipw=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>



<meta property="og:title" content="Convert data from two data frames or ffdf objects into a CyclopsData object — convertToCyclopsData" />

<meta property="og:description" content="convertToCyclopsData loads data from two data frames or ffdf objects, and inserts it into a Cyclops data object." />
<meta name="twitter:card" content="summary" />



<!-- mathjax -->
<script src='https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML'></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->


  </head>

  <body>
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">Cyclops</a>
        <span class="label label-default" data-toggle="tooltip" data-placement="bottom" title="Released package">2.0.1</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fa fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
      
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/ohdsi/cyclops">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      
      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Convert data from two data frames or ffdf objects into a CyclopsData object</h1>
    <small class="dont-index">Source: <a href='https://github.com/ohdsi/cyclops/blob/master/R/NewDataConversion.R'><code>R/NewDataConversion.R</code></a></small>
    <div class="hidden name"><code>convertToCyclopsData.Rd</code></div>
    </div>

    <div class="ref-description">
    
    <p><code>convertToCyclopsData</code> loads data from two data frames or ffdf objects, and inserts it into a Cyclops data object.</p>
    
    </div>

    <pre class="usage"><span class='fu'>convertToCyclopsData</span>(<span class='no'>outcomes</span>, <span class='no'>covariates</span>, <span class='kw'>modelType</span> <span class='kw'>=</span> <span class='st'>"lr"</span>,
  <span class='kw'>addIntercept</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>, <span class='kw'>checkSorting</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>, <span class='kw'>checkRowIds</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>,
  <span class='kw'>normalize</span> <span class='kw'>=</span> <span class='kw'>NULL</span>, <span class='kw'>quiet</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>, <span class='kw'>floatingPoint</span> <span class='kw'>=</span> <span class='fl'>64</span>)

<span class='co'># S3 method for ffdf</span>
<span class='fu'>convertToCyclopsData</span>(<span class='no'>outcomes</span>, <span class='no'>covariates</span>,
  <span class='kw'>modelType</span> <span class='kw'>=</span> <span class='st'>"lr"</span>, <span class='kw'>addIntercept</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>, <span class='kw'>checkSorting</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>,
  <span class='kw'>checkRowIds</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>, <span class='kw'>normalize</span> <span class='kw'>=</span> <span class='kw'>NULL</span>, <span class='kw'>quiet</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>,
  <span class='kw'>floatingPoint</span> <span class='kw'>=</span> <span class='fl'>64</span>)

<span class='co'># S3 method for data.frame</span>
<span class='fu'>convertToCyclopsData</span>(<span class='no'>outcomes</span>, <span class='no'>covariates</span>,
  <span class='kw'>modelType</span> <span class='kw'>=</span> <span class='st'>"lr"</span>, <span class='kw'>addIntercept</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>, <span class='kw'>checkSorting</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>,
  <span class='kw'>checkRowIds</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>, <span class='kw'>normalize</span> <span class='kw'>=</span> <span class='kw'>NULL</span>, <span class='kw'>quiet</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>,
  <span class='kw'>floatingPoint</span> <span class='kw'>=</span> <span class='fl'>64</span>)</pre>
    
    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>outcomes</th>
      <td><p>A data frame or ffdf object containing the outcomes with predefined columns (see below).</p></td>
    </tr>
    <tr>
      <th>covariates</th>
      <td><p>A data frame or ffdf object containing the covariates with predefined columns (see below).</p></td>
    </tr>
    <tr>
      <th>modelType</th>
      <td><p>Cyclops model type. Current supported types are "pr", "cpr", lr", "clr", or "cox"</p></td>
    </tr>
    <tr>
      <th>addIntercept</th>
      <td><p>Add an intercept to the model?</p></td>
    </tr>
    <tr>
      <th>checkSorting</th>
      <td><p>Check if the data are sorted appropriately, and if not, sort.</p></td>
    </tr>
    <tr>
      <th>checkRowIds</th>
      <td><p>Check if all rowIds in the covariates appear in the outcomes.</p></td>
    </tr>
    <tr>
      <th>normalize</th>
      <td><p>String: Name of normalization for all non-indicator covariates (possible values: stdev, max, median)</p></td>
    </tr>
    <tr>
      <th>quiet</th>
      <td><p>If true, (warning) messages are surpressed.</p></td>
    </tr>
    <tr>
      <th>floatingPoint</th>
      <td><p>Specified floating-point representation size (32 or 64)</p></td>
    </tr>
    </table>
    
    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p>An object of type cyclopsData</p>
    
    <h2 class="hasAnchor" id="details"><a class="anchor" href="#details"></a>Details</h2>

    <p>These columns are expected in the outcome object:</p><table class='table'>
<tr><td><code>stratumId</code></td><td>(integer)</td><td>(optional) Stratum ID for conditional regression models</td></tr>
<tr><td><code>rowId</code></td><td>(integer)</td><td>Row ID is used to link multiple covariates (x) to a single outcome (y)</td></tr>
<tr><td><code>y</code></td><td>(real)</td><td>The outcome variable</td></tr>
<tr><td><code>time</code></td><td>(real)</td><td>For models that use time (e.g. Poisson or Cox regression) this contains time</td></tr>
<tr><td></td><td></td><td>(e.g. number of days)</td></tr>
<tr><td><code>weight</code></td><td>(real)</td><td>Non-negative weight to apply to outcome</td></tr>
</table>
    <p>These columns are expected in the covariates object:</p><table class='table'>
<tr><td><code>stratumId</code></td><td>(integer)</td><td>(optional) Stratum ID for conditional regression models</td></tr>
<tr><td><code>rowId</code></td><td>(integer)</td><td>Row ID is used to link multiple covariates (x) to a single outcome (y)</td></tr>
<tr><td><code>covariateId</code></td><td>(integer)</td><td>A numeric identifier of a covariate</td></tr>
<tr><td><code>covariateValue</code></td><td>(real)</td><td>The value of the specified covariate</td></tr>
<tr><td></td><td><code>stratumId</code></td><td>(integer)</td></tr>
</table>
    <p>Note: If checkSorting is turned off, the outcome table should be sorted by stratumId (if present)
and then rowId except for Cox regression when the table should be sorted by
stratumId (if present), -time, y, and rowId. The covariate table should be sorted by covariateId, stratumId
(if present), rowId except for Cox regression when the table should be sorted by covariateId,
stratumId (if present), -time, y, and rowId.</p>
    
    <h2 class="hasAnchor" id="methods-by-class-"><a class="anchor" href="#methods-by-class-"></a>Methods (by class)</h2>

    <ul>
<li><p><code>ffdf</code>: Convert data from two <code>ffdf</code></p></li>
<li><p><code>data.frame</code>: Convert data from two <code>data.frame</code></p></li>
</ul>
    

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'><span class='co'>#Convert infert dataset to Cyclops format:</span>
<span class='no'>covariates</span> <span class='kw'>&lt;-</span> <span class='fu'>data.frame</span>(<span class='kw'>stratumId</span> <span class='kw'>=</span> <span class='fu'>rep</span>(<span class='no'>infert</span>$<span class='no'>stratum</span>, <span class='fl'>2</span>),
                         <span class='kw'>rowId</span> <span class='kw'>=</span> <span class='fu'>rep</span>(<span class='fl'>1</span>:<span class='fu'>nrow</span>(<span class='no'>infert</span>), <span class='fl'>2</span>),
                         <span class='kw'>covariateId</span> <span class='kw'>=</span> <span class='fu'>rep</span>(<span class='fl'>1</span>:<span class='fl'>2</span>, <span class='kw'>each</span> <span class='kw'>=</span> <span class='fu'>nrow</span>(<span class='no'>infert</span>)),
                         <span class='kw'>covariateValue</span> <span class='kw'>=</span> <span class='fu'>c</span>(<span class='no'>infert</span>$<span class='no'>spontaneous</span>, <span class='no'>infert</span>$<span class='no'>induced</span>))
<span class='no'>outcomes</span> <span class='kw'>&lt;-</span> <span class='fu'>data.frame</span>(<span class='kw'>stratumId</span> <span class='kw'>=</span> <span class='no'>infert</span>$<span class='no'>stratum</span>,
                       <span class='kw'>rowId</span> <span class='kw'>=</span> <span class='fl'>1</span>:<span class='fu'>nrow</span>(<span class='no'>infert</span>),
                       <span class='kw'>y</span> <span class='kw'>=</span> <span class='no'>infert</span>$<span class='no'>case</span>)
<span class='co'>#Make sparse:</span>
<span class='no'>covariates</span> <span class='kw'>&lt;-</span> <span class='no'>covariates</span>[<span class='no'>covariates</span>$<span class='no'>covariateValue</span> <span class='kw'>!=</span> <span class='fl'>0</span>, ]

<span class='co'>#Create Cyclops data object:</span>
<span class='no'>cyclopsData</span> <span class='kw'>&lt;-</span> <span class='fu'>convertToCyclopsData</span>(<span class='no'>outcomes</span>, <span class='no'>covariates</span>, <span class='kw'>modelType</span> <span class='kw'>=</span> <span class='st'>"clr"</span>,
                                    <span class='kw'>addIntercept</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>)</div><div class='output co'>#&gt; Sorting outcomes by stratumId and rowId
#&gt; Sorting covariates by covariateId, stratumId, and rowId</div><div class='input'>
<span class='co'>#Fit model:</span>
<span class='no'>fit</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='fitCyclopsModel.html'>fitCyclopsModel</a></span>(<span class='no'>cyclopsData</span>, <span class='kw'>prior</span> <span class='kw'>=</span> <span class='fu'><a href='createPrior.html'>createPrior</a></span>(<span class='st'>"none"</span>))</div></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
    <h2>Contents</h2>
    <ul class="nav nav-pills nav-stacked">
      <li><a href="#arguments">Arguments</a></li>
      
      <li><a href="#value">Value</a></li>

      <li><a href="#details">Details</a></li>

      <li><a href="#methods-by-class-">Methods (by class)</a></li>
      
      <li><a href="#examples">Examples</a></li>
    </ul>

  </div>
</div>

      <footer>
      <div class="copyright">
  <p>Developed by Marc A. Suchard, Martijn J. Schuemie, Trevor R. Shaddox, Yuxi Tian, Jianxiao Yang.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="http://pkgdown.r-lib.org/">pkgdown</a>.</p>
</div>

      </footer>
   </div>

  

  </body>
</html>

